(function(e){function t(t){for(var a,r,o=t[0],c=t[1],l=t[2],d=0,m=[];d<o.length;d++)r=o[d],n[r]&&m.push(n[r][0]),n[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(m.length)m.shift()();return i.push.apply(i,l||[]),s()}function s(){for(var e,t=0;t<i.length;t++){for(var s=i[t],a=!0,o=1;o<s.length;o++){var c=s[o];0!==n[c]&&(a=!1)}a&&(i.splice(t--,1),e=r(r.s=s[0]))}return e}var a={},n={app:0},i=[];function r(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=a,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(s,a,function(t){return e[t]}.bind(null,a));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;i.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"0418":function(e,t,s){},"0747":function(e,t,s){"use strict";var a=s("9c11"),n=s.n(a);n.a},"0e61":function(e,t,s){"use strict";var a=s("6de0"),n=s.n(a);n.a},1:function(e,t){},"10f4":function(e,t,s){},"2c74":function(e,t,s){"use strict";var a=s("d9e1"),n=s.n(a);n.a},3176:function(e,t,s){"use strict";var a=s("10f4"),n=s.n(a);n.a},"34c3":function(e,t,s){"use strict";var a=s("dfc5"),n=s.n(a);n.a},"372c":function(e,t,s){"use strict";var a=s("d40b"),n=s.n(a);n.a},"3b49":function(e,t,s){"use strict";var a=s("bf3e"),n=s.n(a);n.a},"56d7":function(e,t,s){"use strict";s.r(t);s("6b54"),s("cadf"),s("551c"),s("f751"),s("097d");var a=s("2b0e"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s(e.layout,{tag:"component"})],1)},i=[],r=s("cebc"),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"layout"},[s("header-comp"),s("section",{staticClass:"wrap-layout-content"},[s("div",{staticClass:"container"},[s("div",{staticClass:"layout-content"},[s("div",{staticClass:"wrap-menu-mobile"},[s("menu-mobile")],1),s("div",{staticClass:"sidebar"},[s("menu-desktop")],1),s("div",{staticClass:"main-content"},[s(e.currentContent,{tag:"component"})],1)])])])],1)},c=[],l=(s("7f7f"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{ref:"msgs",staticClass:"msgs"},[e.stateDialogWindow?s("messages-dialog-window"):s("div",{staticClass:"wrap-msgs"},[s("div",{staticClass:"add-dialog",on:{click:e.showFriends,mouseover:function(t){e.showTooltip=!0},mouseleave:function(t){e.showTooltip=!1}}},[s("transition",{attrs:{name:"fade"}},[e.showTooltip?s("div",{staticClass:"add-dialog__tooltip"},[e._v(e._s(e.textTooltip))]):e._e()]),s("div",{staticClass:"add-dialog__plus",class:[e.stateRotate?"rotate-plus":null]},[e._v("+")])],1),s("input",{ref:"header",staticClass:"msgs-header",attrs:{type:"text"}}),e.spinnerLastMsgs?s("div",{staticClass:"spinner spinner--msgs"}):e._e(),e.stateRotate?s("div",{staticClass:"msgs-friends"},[e.friend.friends?s("div",{staticClass:"msgs-friend-wrap"},e._l(e.friend.friends.friends,function(t){return s("div",{staticClass:"msgs-friend",on:{click:function(s){return e.setFriend({_id:t._id,name:t.name,lastName:t.lastName,image:t.image})}}},[s("div",{staticClass:"msgs-friend-wrap-img"},[s("img",{staticClass:"msgs-friend__img",attrs:{src:t.image}})]),s("p",{staticClass:"msgs-friend__name"},[e._v(e._s(e._f("capitalize")(t.name))+" "+e._s(e._f("capitalize")(t.lastName)))])])}),0):s("div",{staticClass:"note"},[s("p",[e._v("для того, чтобы начать общаться добавьте друзей")])])]):s("div",{staticClass:"msgs-last-msgs"},[s("p",{staticClass:"margin-top10"}),e._l(e.lastMsgs,function(t){return s("div",{staticClass:"msgs-msg-row",on:{click:function(s){return e.setFriend({_id:t._id,name:t.name,lastName:t.lastName,image:t.image,counterUnreadMsgs:t.counterUnreadMsgs})}}},[s("div",{staticClass:"msgs-row-wrap-image"},[s("div",{staticClass:"msgs-row-wrap-image__counter"},[e._v(e._s(t.counterUnreadMsgs&&t.counterUnreadMsgs>0?t.counterUnreadMsgs:null))]),s("img",{staticClass:"msgs-msg-row__image",attrs:{src:t.image}})]),s("div",{staticClass:"msgs-row-wrap-content"},[s("p",{staticClass:"msgs-row-wrap-content__name"},[e._v(e._s(e._f("capitalize")(t.name))+" "+e._s(e._f("capitalize")(t.lastName)))]),s("p",{staticClass:"msgs-row-wrap-content__message"},[e._v(e._s(t.message))])])])})],2)])],1)}),u=[],d=s("2f62"),m=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{ref:"dialog-window",staticClass:"dialog-window"},[s("div",{ref:"dialog-header",staticClass:"dialog-header"},[s("div",{staticClass:"dialog-header-wrap-img"},[s("img",{staticClass:"dialog-header__img",attrs:{src:e.friend.image}})]),s("p",[e._v(e._s(e._f("capitalize")(e.friend.name))+" "+e._s(e._f("capitalize")(e.friend.lastName)))])]),e.spinnerFriendMsgs?s("div",{staticClass:"spinner"}):s("div",{staticClass:"dialog-messages"},[e.getStateFirstMsgs?s("p",{style:{"text-align":"center"}},[e._v("у вас больше нет сообщений")]):e._e(),e._l(e.friendMsgs,function(t,a){return s("div",{staticClass:"dialog-wrap-message"},[t.showDate?s("p",{staticClass:"dialog-message__day"},[e._v(e._s(t.date))]):e._e(),t.showName?s("p",{staticClass:"dialog-message__username"},[e._v(e._s(e._f("capitalize")(t.sender.name))),s("span",{staticClass:"dialog-message__time"},[e._v(e._s(t.time))])]):e._e(),s("pre",{staticClass:"dialog__message",class:[t.stateRead?"readMsg":"",t.readMsg?"readMsg":""]},[e._v(e._s(t.message))])])})],2),s("div",{ref:"dialog-footer",staticClass:"dialog-footer"},[s("form",{staticClass:"dialog-form",on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.submitMsg(t))}}},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],staticClass:"dialog-form__message",attrs:{rows:"2"},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}})]),s("span",{staticClass:"icon-send icon-send-message",on:{click:e.submitMsg}})])])},f=[],h=(s("ac6a"),{data:function(){return{message:"",counter:1}},computed:Object(r["a"])({},Object(d["b"])("messages",["friendMsgs","getStateFirstMsgs"]),Object(d["c"])("messages",["friend","spinnerFriendMsgs","msgsSettings","statePrevMsgs","lastMsgs"])),watch:{getStateFirstMsgs:function(e){var t=this;e&&this.$nextTick(function(){document.body.scrollTop=document.documentElement.scrollTop=10,t.$store.commit("messages/changeStatePrevMsgs",!1)})},friendMsgs:function(e){var t=this;e.length&&(setTimeout(function(){var s=[];e.forEach(function(e){e.sender._id!==localStorage.id&&!1===e.stateRead&&(s.push(e._id),e.readMsg=!0)}),t.lastMsgs.forEach(function(e){return e._id===t.friend.id?e.counterUnreadMsgs=0:null}),s.length&&t.$store.dispatch("messages/updateStateReadMsgs",s),t.$forceUpdate()},600),this.statePrevMsgs?this.$nextTick(function(){document.body.scrollTop=document.documentElement.scrollTop=10,t.$store.commit("messages/changeStatePrevMsgs",!1)}):this.scrollToEnd())}},mounted:function(){this.scroll(),this.setWidthWindow(),window.addEventListener("resize",this.setWidthWindow)},beforeDestroy:function(){window.removeEventListener("resize",this.setWidthWindow)},methods:{submitMsg:function(e){e.shiftKey?(e.target.value+="\n",this.scrollToEnd()):(this.message.length>0&&(this.$store.commit("messages/addToFriendMsgs",{message:this.message}),this.$store.dispatch("messages/sendMsg",{message:this.message})),this.message="",this.scrollToEnd())},setWidthWindow:function(){var e="".concat(this.$refs["dialog-window"].offsetWidth-2,"px");this.$refs["dialog-header"].style.width=e,this.$refs["dialog-footer"].style.width=e},scrollToEnd:function(){var e=this.$refs["dialog-window"];this.$nextTick(function(){e&&window.scroll(0,e.scrollHeight)})},scroll:function(){var e=this;window.onscroll=function(t){var s=window.pageYOffset||document.documentElement.scrollTop;s<5&&e.msgsSettings.skip==e.counter&&!e.getStateFirstMsgs&&(e.$store.commit("messages/changeStatePrevMsgs",!0),e.$store.dispatch("messages/friendMsgs"),e.counter+=1)}}}}),p=h,g=(s("bf65"),s("2877")),v=Object(g["a"])(p,m,f,!1,null,null,null),_=v.exports,w={components:{MessagesDialogWindow:_},data:function(){return{showTooltip:!1}},computed:Object(r["a"])({},Object(d["c"])("messages",["lastMsgs","stateDialogWindow","stateRotate","friend","spinnerLastMsgs"]),{textTooltip:function(){return this.stateRotate?"Отмена":"Начать беседу"}}),watch:{stateDialogWindow:function(e){var t=this;e||(this.$store.commit("messages/clearDialogWindow"),this.$nextTick(function(){return t.widthHeader()}))}},created:function(){!this.lastMsgs.length&&this.$store.dispatch("messages/lastMsgs")},mounted:function(){this.widthHeader(),window.addEventListener("resize",this.widthHeader)},beforeDestroy:function(){window.removeEventListener("resize",this.widthHeader)},methods:{widthHeader:function(){this.$refs.header&&(this.$refs.header.style.width="".concat(this.$refs.msgs.offsetWidth,"px"))},setFriend:function(e){this.$store.commit("messages/changeStateRotate",!1),this.$store.commit("messages/setFriend",e),this.$store.dispatch("messages/friendMsgs"),this.$store.commit("messages/changeStateDialogWindow",!0),e.counterUnreadMsgs&&this.$store.commit("home/changeCounterUnreadMsgs",e.counterUnreadMsgs)},showFriends:function(){this.$store.commit("messages/changeStateRotate",!this.stateRotate),this.friend.friends.length<1&&this.stateRotate&&this.$store.dispatch("messages/setFriends")}}},b=w,C=(s("991d"),Object(g["a"])(b,l,u,!1,null,"9c35fb4a",null)),M=C.exports,y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.user.image?s("section",{staticClass:"home"},[s("div",{staticClass:"home-top-block"},[s("home-img"),s("div",{staticClass:"home-top-block-wrap-info"},[e._m(0),s("p",{staticClass:"home-top-block-info__name"},[e._v(e._s(e._f("capitalize")(e.user.name))+" "+e._s(e._f("capitalize")(e.user.lastName)))]),s("p",{staticClass:"home-top-block-info__status"},[e._v("изменить статус")]),e._m(1),e._m(2)])],1)]):e._e()},F=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home-top-block-wrap-info-overlay"},[s("p",[e._v("раздел в разработке")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",{staticClass:"home-top-block-info__birthday"},[e._v("День рождения: "),s("span",{staticClass:"home-top-block-info__change-birthday"},[e._v("изменить")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",{staticClass:"home-top-block-info__city"},[e._v("Город: "),s("span",{staticClass:"home-top-block-info__change-city"},[e._v("изменить")])])}],S=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home-top-block-wrap-img",style:[this.showBtnUpload?{cursor:"move"}:""],on:{mouseover:function(t){e.editAvatar=!e.editAvatar},mouseout:function(t){e.editAvatar=!e.editAvatar}}},[s("div",{staticClass:"wrap-croppa"},[s("croppa",{attrs:{"disable-drag-to-move":e.disableMove,disableScrollToZoom:e.disableZoom,width:210,height:210,quality:1,"file-size-limit":35e4,"initial-size":"cover","zoom-speed":9,"initial-image":e.user.image,"show-remove-button":!1,"prevent-white-space":!0},on:{"file-size-exceed":e.onFileSizeExceed,"file-type-mismatch":e.onFileTypeMismatch,"new-image":e.addImg,"file-choose":e.fileChoose},model:{value:e.myCroppa,callback:function(t){e.myCroppa=t},expression:"myCroppa"}})],1),s("div",{staticClass:"home-top-block-edit-img",class:[e.editAvatar?"show-edit":""]},[s("span",{staticClass:"home-top-block-edit-img__control",on:{click:e.changeAvatar}},[e._v("изменить")]),s("span",{staticClass:"home-top-block-edit-img__control",style:[e.showBtnUpload?"":{display:"none"}],on:{click:e.uploadAvatar}},[e._v("загрузить")])])])},E=[],k={data:function(){return{showBtnUpload:!1,disableZoom:!0,myCroppa:{},editAvatar:!1,selectedFile:null,nameImg:"",disableControl:!1,disableMove:!1}},computed:Object(r["a"])({},Object(d["c"])("home",["user"])),methods:{onFileSelected:function(e){this.selectedFile=e.target.files[0]},fileChoose:function(){this.disableControl=!0,this.nameImg=this.myCroppa.getChosenFile().name},uploadAvatar:function(){var e=this;this.disableZoom=!0,this.disableMove=!0,this.showBtnUpload=!1,this.disableControl=!1,this.myCroppa.generateBlob(function(t){var s=new FormData;s.append("avatar",t,e.nameImg),s.append("id",localStorage.id),e.$store.dispatch("home/changeAvatar",s)})},changeAvatar:function(){this.disableMove=!1,this.disableZoom=!1,this.myCroppa.chooseFile()},onFileSizeExceed:function(){alert("Размер файла не должен привышать 300кб")},onFileTypeMismatch:function(){alert("Тип файла должен быть jpeg или png")},addImg:function(){this.showBtnUpload=!0}}},$=k,T=(s("9aa6"),Object(g["a"])($,S,E,!1,null,null,null)),x=T.exports,N={components:{HomeImg:x},computed:Object(r["a"])({},Object(d["c"])("home",["user"]))},A=N,O=(s("6acf"),Object(g["a"])(A,y,F,!1,null,null,null)),j=O.exports,P=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"friends"},[s("div",{ref:"wrapFriends",staticClass:"wrap-friends"},[s("div",{ref:"header",staticClass:"wrap-friends-header"},[s("div",{staticClass:"friends-header"},[s("div",{staticClass:"friends-header__title",on:{click:function(t){return e.changeTab("FriendsFriends")}}},[e._v("Мои друзья"),s("span",{staticClass:"friends__length"},[e._v(e._s(e.friendsLength>0?e.friendsLength:""))])]),s("div",{staticClass:"friends-header__title friends-header__title--search",on:{click:function(t){return e.changeTab("FriendsHumans")}}},[e._v("Поиск друзей")])]),s("div",{staticClass:"wrap-friends-search"},[s("div",{staticClass:"friends-search__icon-search icon-search"}),s("label",{staticClass:"friends-search__label",class:[e.activeInput?"active-input":null,e.showLabel?null:"hide-label"],attrs:{for:"inp"}},[e._v("начните вводить имя друга")]),s("transition",{attrs:{name:"fade"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"},{name:"debounce",rawName:"v-debounce:700ms",value:e.searchFriends,expression:"searchFriends",arg:"700ms"}],staticClass:"friends-search",attrs:{id:"inp"},domProps:{value:e.search},on:{focus:function(t){e.activeInput=!0},blur:function(t){e.activeInput=!1},input:[function(t){t.target.composing||(e.search=t.target.value)},e.handleInput]}})])],1)]),s(e.activeTab,{tag:"component"})],1)])},L=[],H=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"friends-body"},[s("friends-query"),s("friends")],1)},U=[],I=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrap-queries"},[e.spinnerFriends?s("div",{staticClass:"spinner"}):e._e(),e.whoAddingMe.length?s("div",{staticClass:"queries"},[s("p",{staticClass:"queries__title"},[e._v(e._s(e.queryTitle))]),e._l(e.whoAddingMe,function(t){return s("router-link",{staticClass:"queries-wrap-friend",attrs:{to:"/user/"+t._id}},[s("div",{staticClass:"queries-friend"},[s("div",{staticClass:"queries-wrap-image"},[s("div",{staticClass:"queries-friend-status",class:t.online?"online":null}),s("img",{staticClass:"queries-friend__image",attrs:{src:t.image}})]),s("div",{staticClass:"queries-wrap-info"},[s("div",{staticClass:"queries-wrap-info__title"},[e._v(e._s(e._f("capitalize")(t.name))+" "+e._s(e._f("capitalize")(t.lastName)))]),s("div",{staticClass:"queries-wrap-info-btns"},[s("button",{staticClass:"queries-wrap-info__btn",on:{click:function(s){return s.preventDefault(),e.addFriend(t._id)}}},[e._v("Подтвердить")]),s("button",{staticClass:"queries-wrap-info__btn",on:{click:function(s){return s.preventDefault(),e.rejectionFriendship(t._id)}}},[e._v("Отменить")])])])])])})],2):e._e()])},q=[],D={computed:Object(r["a"])({},Object(d["c"])("friends",["whoAddingMe","spinnerFriends"]),Object(d["b"])("friends",["queryTitle"])),methods:{addFriend:function(e){this.$store.dispatch("friends/addFriend",e)},rejectionFriendship:function(e){this.$store.dispatch("friends/rejectionFriendship",e)}}},W=D,z=(s("0e61"),Object(g["a"])(W,I,q,!1,null,"7eb13c88",null)),R=z.exports,B=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrap-friends"},[s("p",{staticClass:"wrap-friends__title"},[e._v(e._s(e.friendsTitle))]),s("p",[e._v(e._s(e.noMatchesFriends))]),e._l(e.showFriends,function(t,a){return s("router-link",{staticClass:"wrap-friend",attrs:{to:"/user/"+t._id}},[s("div",{staticClass:"friends-friend"},[s("div",{staticClass:"friend-icon",on:{click:function(t){return t.preventDefault(),e.settings(a)}}},[s("span",{staticClass:"friend-icon__point"}),s("span",{staticClass:"friend-icon__point"}),s("span",{staticClass:"friend-icon__point"})]),e.showSettings===a?s("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:e.settings,expression:"settings"}],staticClass:"friend-settings",on:{click:function(e){e.preventDefault()}}},[s("transition",{attrs:{name:"fade"}},[s("span",{staticClass:"friend-delete-friend",on:{click:function(s){return e.deleteFriend(t._id,a)}}},[e._v("убрать из друзей")])])],1):e._e(),s("div",{staticClass:"friend-wrap-image"},[s("div",{staticClass:"friend-status",class:t.online?"online":null}),s("img",{staticClass:"friend__image",attrs:{src:t.image}})]),s("div",{staticClass:"friend-wrap-info"},[s("div",{staticClass:"friend-wrap-info__name"},[e._v(e._s(e._f("capitalize")(t.name))+" "+e._s(e._f("capitalize")(t.lastName)))])])])])})],2)},V=[],G=s("c7db"),Q={mixins:[G["mixin"]],data:function(){return{showSettings:null}},computed:Object(r["a"])({},Object(d["b"])("friends",["friendsTitle","showFriends","noMatchesFriends"])),methods:{settings:function(e){this.showSettings===e?this.showSettings=null:this.showSettings=e},deleteFriend:function(e,t){this.$store.dispatch("friends/deleteFriend",{id:e,idx:t})}}},Z=Q,J=(s("b7c6"),Object(g["a"])(Z,B,V,!1,null,"05594be7",null)),K=J.exports,Y={components:{FriendsQuery:R,Friends:K},created:function(){this.$store.dispatch("friends/getFriends")}},X=Y,ee=(s("0747"),Object(g["a"])(X,H,U,!1,null,null,null)),te=ee.exports,se=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"friends-humans"},[s("p",[e._v(e._s(e.noMatchesHumans))]),e.spinnerHumans?s("div",{staticClass:"spinner"}):s("div",{ref:"humansWrap",staticClass:"friends-humans-wrap"},e._l(e.showHumans,function(t){return s("router-link",{staticClass:"friends-human",attrs:{to:"/user/"+t._id}},[s("div",{staticClass:"friends-human-wrap-image"},[s("img",{staticClass:"friends-human__image",attrs:{src:t.image}})]),s("div",{staticClass:"friends-human__name"},[e._v(e._s(e._f("capitalize")(t.name)))]),s("div",{staticClass:"friends-human__name"},[e._v(e._s(e._f("capitalize")(t.lastName)))]),s("button",{staticClass:"friends-human__btn",class:t.friendQuery?"disable-btn":null,on:{click:function(s){s.preventDefault(),!t.friendQuery&&e.offerToFriendship(t._id)}}},[e._v(e._s(t.btnText))])])}),1)])},ae=[],ne={computed:Object(r["a"])({},Object(d["b"])("friends",["showHumans","noMatchesHumans"]),Object(d["c"])("friends",["spinnerHumans"])),created:function(){!this.showHumans.length&&this.$store.dispatch("friends/getHumans")},methods:{offerToFriendship:function(e){this.$store.dispatch("friends/offerToFriendship",e)}}},ie=ne,re=(s("2c74"),Object(g["a"])(ie,se,ae,!1,null,"84387f84",null)),oe=re.exports,ce={components:{FriendsFriends:te,FriendsHumans:oe},data:function(){return{search:"",activeInput:!1,showLabel:!0}},computed:Object(r["a"])({},Object(d["c"])("friends",["activeTab"]),Object(d["b"])("friends",["friendsLength"])),mounted:function(){this.widthHeader(),window.addEventListener("resize",this.widthHeader)},beforeDestroy:function(){window.removeEventListener("resize",this.widthHeader)},methods:{changeTab:function(e){this.search="",this.$store.commit("friends/changeActiveTab",e)},widthHeader:function(){var e="".concat(this.$refs["wrapFriends"].offsetWidth,"px");this.$refs["header"].style.width=e},handleInput:function(){event.target.value.length?this.showLabel=!1:this.showLabel=!0},searchFriends:function(e){"FriendsFriends"===this.activeTab&&this.$store.dispatch("friends/searchFriends",e),"FriendsHumans"===this.activeTab&&this.$store.dispatch("friends/searchHumans",e)}}},le=ce,ue=(s("e37f"),Object(g["a"])(le,P,L,!1,null,"64d9773f",null)),de=ue.exports,me=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"header"},[s("div",{staticClass:"container"},[s("div",{staticClass:"header-content"},[s("router-link",{staticClass:"logo",attrs:{to:"/"}},[e._v("Friend")]),s("span",{staticClass:"login",style:[e.hideHover?{background:"#477dbd"}:null],on:{click:e.settings}},[e._v(e._s(e.userName)),s("span",{class:[e.showSettings?"icon-arrow_up":"icon-arrow_down"]}),s("transition",{attrs:{name:"fade"}},[e.showSettings?s("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:e.settings,expression:"settings"}],staticClass:"user-settings",on:{mouseover:function(t){e.hideHover=!e.hideHover},mouseout:function(t){e.hideHover=!e.hideHover}}},[s("span",{staticClass:"logOut",on:{click:e.logOut}},[e._v("выйти")])]):e._e()])],1)],1)])])},fe=[],he={mixins:[G["mixin"]],data:function(){return{showSettings:!1,hideHover:!1}},computed:{userName:function(){return localStorage.getItem("name")}},methods:{settings:function(){this.showSettings=!this.showSettings},logOut:function(){this.$store.commit("auth/clearStorage"),this.$store.dispatch("clearStore"),this.$router.push("/auth")}}},pe=he,ge=(s("372c"),Object(g["a"])(pe,me,fe,!1,null,null,null)),ve=ge.exports,_e=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"menu-desktop"},e._l(e.list,function(t,a){return s("router-link",{key:a,staticClass:"menu-el",attrs:{to:t.url},nativeOn:{click:function(s){return e.clickToLink(t.url)}}},[s("span",{staticClass:"menu-el__icon",class:t.icon}),s("span",{staticClass:"menu-el__title"},[e._v(e._s(t.title))]),"/friends"===t.url&&e.user.counterWhoAddingMe>0?s("span",{staticClass:"menu-el__counter"},[e._v(e._s(e.user.counterWhoAddingMe))]):e._e(),"/messages"===t.url&&e.user.counterUnreadMsgs>0?s("span",{staticClass:"menu-el__counter"},[e._v(e._s(e.user.counterUnreadMsgs))]):e._e()])}),1)},we=[],be={computed:Object(r["a"])({},Object(d["c"])("menu",["list"]),Object(d["c"])("home",["user"])),methods:{clickToLink:function(e){"/friends"===e&&this.$store.commit("friends/changeActiveTab","FriendsFriends"),"/messages"===e&&(this.$store.commit("messages/changeStateDialogWindow",!1),this.$store.commit("messages/changeStateRotate",!1))}}},Ce=be,Me=(s("cf38"),Object(g["a"])(Ce,_e,we,!1,null,null,null)),ye=Me.exports,Fe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"menu-mobile"},e._l(e.list,function(t,a){return s("router-link",{key:a,staticClass:"menu-el",attrs:{to:t.url},nativeOn:{click:function(s){return e.clickToLink(t.url)}}},[s("span",{staticClass:"menu-el__icon",class:t.icon}),"/friends"===t.url&&e.user.counterWhoAddingMe>0?s("span",{staticClass:"menu-el__mob-counter"},[e._v(e._s(e.user.counterWhoAddingMe))]):e._e(),"/messages"===t.url&&e.user.counterUnreadMsgs>0?s("span",{staticClass:"menu-el__mob-counter"},[e._v(e._s(e.user.counterUnreadMsgs))]):e._e()])}),1)},Se=[],Ee={computed:Object(r["a"])({},Object(d["c"])("menu",["list"]),Object(d["c"])("home",["user"])),methods:{clickToLink:function(e){"/friends"===e&&this.$store.commit("friends/changeActiveTab","FriendsFriends"),"/messages"===e&&(this.$store.commit("messages/changeStateDialogWindow",!1),this.$store.commit("messages/changeStateRotate",!1))}}},ke=Ee,$e=(s("3176"),Object(g["a"])(ke,Fe,Se,!1,null,null,null)),Te=$e.exports,xe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"show",rawName:"v-show",value:e.stateLoadingAvatar,expression:"stateLoadingAvatar"}],staticClass:"wrap-user"},[s("modal",{attrs:{name:"msgPopup",adaptive:"",width:"90%",maxWidth:600,minHeight:350}},[s("popup-msg",{attrs:{user:e.user},on:{closePopup:e.closeMsgPopup,sendMsg:e.sendMsg}})],1),s("modal",{staticClass:"modal-msg-sent",attrs:{name:"msgSent",width:250,height:45}},[s("p",{staticClass:"modal-msg-sent__title"},[e._v("сообщение отправлено")])]),s("div",{staticClass:"user-top-block"},[s("div",{staticClass:"user-left-block"},[s("div",{staticClass:"user-wrap-image"},[s("img",{staticClass:"user__image",attrs:{src:e.user.image},on:{load:e.loadImg}})])]),s("div",{staticClass:"user-wrap-info"},[s("p",[e._v(e._s(e._f("capitalize")(e.user.name))+" "+e._s(e._f("capitalize")(e.user.lastName)))])])]),s("div",{staticClass:"wrap-user-btn"},[s("button",{staticClass:"user__btn",class:e.disable?"disable":null,attrs:{disabled:e.disable},on:{click:e.handleClick}},[e._v(e._s(e.user.btnText))]),s("span",{staticClass:"spinner-btn",class:e.showSpinnerBtn?"spinner":null})])],1)},Ne=[],Ae=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrap-popup-msg"},[s("div",{staticClass:"popup-msg-header"},[s("span",{staticClass:"popup-msg-header__title"},[e._v("Новое сообщение")]),s("span",{staticClass:"popup-msg-header__close",on:{click:e.closePopup}},[e._v("x")])]),s("div",{staticClass:"popup-msg-body"},[s("div",{staticClass:"popup-msg-info"},[s("div",{staticClass:"popup-msg-wrap-img"},[s("img",{staticClass:"popup-msg__img",attrs:{src:e.user.image}})]),s("p",{staticClass:"popup-msg-wrap-name"},[e._v(e._s(e._f("capitalize")(e.user.name))+" "+e._s(e._f("capitalize")(e.user.lastName)))])]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.msgValue,expression:"msgValue"}],staticClass:"popup-msg-textarea",domProps:{value:e.msgValue},on:{input:function(t){t.target.composing||(e.msgValue=t.target.value)}}})]),s("button",{staticClass:"popup-msg-btn",on:{click:e.sendMsg}},[e._v("Отправить")])])},Oe=[],je={props:["user"],data:function(){return{msgValue:""}},methods:{sendMsg:function(){this.msgValue.length>0&&this.$emit("sendMsg",this.msgValue)},closePopup:function(){this.$emit("closePopup")}}},Pe=je,Le=(s("d800"),Object(g["a"])(Pe,Ae,Oe,!1,null,null,null)),He=Le.exports,Ue={components:{PopupMsg:He},data:function(){return{showSpinnerBtn:!1,disable:!1,stateLoadingAvatar:!1}},computed:Object(r["a"])({},Object(d["c"])("user",["user"])),created:function(){this.$store.dispatch("user/getUserInfo",this.$route.params.id)},methods:{clearTextBtn:function(e,t){var s=this;e.target.innerHTML=t,setTimeout(function(){e.target.innerHTML="",s.showSpinnerBtn=!0,s.disable=!0},800)},setTextBtn:function(e){var t=this;setTimeout(function(){e.target.innerHTML="написать сообщение",t.showSpinnerBtn=!1,t.disable=!1},2e3)},handleClick:function(e){this.user.stateFriendship?this.openMsgPopup():this.user.stateAdding||this.user.stateAddingMe?this.user.stateAddingMe?(this.$store.commit("user/changeStateAddingMe",!1),this.$store.commit("user/changeStateFriendship",!0),this.clearTextBtn(e,"добавление успешно"),this.setTextBtn(e),this.$store.commit("friends/addFriend",this.user.id)):this.openMsgPopup():(this.$store.dispatch("friends/offerToFriendship",this.user.id),this.$store.commit("user/changeStateAdding",!0),this.clearTextBtn(e,"запрос отправлен"),this.setTextBtn(e))},closeMsgPopup:function(){this.$modal.hide("msgPopup")},loadImg:function(e){this.stateLoadingAvatar=!0},openMsgPopup:function(){this.$modal.show("msgPopup")},sendMsg:function(e){var t=this;this.$store.dispatch("messages/sendMsg",{message:e}),this.$modal.hide("msgPopup"),this.$modal.show("msgSent"),setTimeout(function(){t.$modal.hide("msgSent")},1300)}}},Ie=Ue,qe=(s("896d"),Object(g["a"])(Ie,xe,Ne,!1,null,"6c25e1c8",null)),De=qe.exports,We={components:{HeaderComp:ve,MenuDesktop:ye,MenuMobile:Te,Home:j,Messages:M,Friends:de,User:De},computed:{currentContent:function(){return this.$route.name}}},ze=We,Re=(s("3b49"),Object(g["a"])(ze,o,c,!1,null,null,null)),Be=Re.exports,Ve=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(e.currentContent,{tag:"component"})},Ge=[],Qe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"auth"},[s("div",{staticClass:"wrapper-auth"},[s("div",{staticClass:"auth-content"},[s("div",{staticClass:"auth-header"},[s("span",{staticClass:"auth-header__item",class:["SignIn"===e.activeTab&&"active-tab"],on:{click:function(t){return e.changeTab("SignIn")}}},[e._v("вход")]),s("span",{staticClass:"auth-header__item",class:["SignUp"===e.activeTab&&"active-tab"],on:{click:function(t){return e.changeTab("SignUp")}}},[e._v("регистрация")])]),s(e.activeTab,{tag:"component"}),s("div",{staticClass:"wrap-error"},[s("p",{staticClass:"error"},[e._v(e._s(e.error))])])],1)])])},Ze=[],Je=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("form",{staticClass:"wrap-sign-in"},[e.styleGoToSignIn?s("div",{staticClass:"sign-in-congratulations"},[s("p",[e._v("Поздравляем с успешной регистрацией!")]),s("p",[e._v("Для входа на сайт введите email и пароль")])]):e._e(),s("div",{staticClass:"row",class:[e.styleGoToSignIn?"direction-row":""]},[s("div",{staticClass:"row-item",class:[e.styleGoToSignIn?"small-widht":""]},[s("label",{staticClass:"label",class:[!e.labelEmail&&"hide-label"],attrs:{for:"email"}},[e._v("E-mail"),s("span",{staticClass:"label-star"},[e._v("*")])]),e.errors.has("email")?s("span",{staticClass:"error"},[e._v(e._s(e.errors.first("email")))]):e._e(),s("input",{directives:[{name:"validate",rawName:"v-validate.disable",value:"required|email",expression:"'required|email'",modifiers:{disable:!0}},{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],attrs:{name:"email",type:"text",id:"email"},domProps:{value:e.user.email},on:{input:[function(t){t.target.composing||e.$set(e.user,"email",t.target.value)},function(t){return e.inputEmail(t)}],focus:function(t){return e.hideLabel("labelEmail")},blur:function(t){return e.showLabel("labelEmail",e.user.email)}}})]),s("div",{staticClass:"row-item",class:[e.styleGoToSignIn?"small-widht":""]},[s("label",{staticClass:"label",class:[!e.labelPassword&&"hide-label"],attrs:{for:"password"}},[e._v("Пароль"),s("span",{staticClass:"label-star"},[e._v("*")])]),s("div",{staticClass:"icon-eye",class:[!!e.showEye&&"show-eye",!!e.lightEye&&"active-eye"],on:{click:e.showPassword}}),e.errors.has("password")?s("span",{staticClass:"error"},[e._v(e._s(e.errors.first("password")))]):e._e(),"checkbox"===e.typeEmail?s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],ref:"password",attrs:{id:"password",name:"password",type:"checkbox"},domProps:{checked:Array.isArray(e.user.password)?e._i(e.user.password,null)>-1:e.user.password},on:{focus:function(t){return e.hideLabel("labelPassword")},blur:function(t){return e.showLabel("labelPassword",e.user.password)},input:function(t){return e.inputPassword(t)},change:function(t){var s=e.user.password,a=t.target,n=!!a.checked;if(Array.isArray(s)){var i=null,r=e._i(s,i);a.checked?r<0&&e.$set(e.user,"password",s.concat([i])):r>-1&&e.$set(e.user,"password",s.slice(0,r).concat(s.slice(r+1)))}else e.$set(e.user,"password",n)}}}):"radio"===e.typeEmail?s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],ref:"password",attrs:{id:"password",name:"password",type:"radio"},domProps:{checked:e._q(e.user.password,null)},on:{focus:function(t){return e.hideLabel("labelPassword")},blur:function(t){return e.showLabel("labelPassword",e.user.password)},input:function(t){return e.inputPassword(t)},change:function(t){return e.$set(e.user,"password",null)}}}):s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],ref:"password",attrs:{id:"password",name:"password",type:e.typeEmail},domProps:{value:e.user.password},on:{focus:function(t){return e.hideLabel("labelPassword")},blur:function(t){return e.showLabel("labelPassword",e.user.password)},input:[function(t){t.target.composing||e.$set(e.user,"password",t.target.value)},function(t){return e.inputPassword(t)}]}})])]),s("button",{staticClass:"btn",on:{click:function(t){return t.preventDefault(),e.submitForm(t)}}},[e._v("войти")])])},Ke=[],Ye={computed:Object(r["a"])({},Object(d["c"])("auth",["styleGoToSignIn"])),data:function(){return{lightEye:!1,showEye:!1,labelEmail:!0,labelPassword:!0,typeEmail:"password",user:{email:"",password:""}}},methods:{showPassword:function(){"password"===this.typeEmail?this.typeEmail="text":this.typeEmail="password",this.lightEye=!this.lightEye,this.$refs.password.focus()},inputPassword:function(e){e.target.value.length>0?this.showEye=!0:this.showEye=!1},inputEmail:function(e){var t=this;this.$validator.validate("email").then(function(){t.errors.items.forEach(function(t){"email"===t.field&&e.target.value.length>0&&(t.msg="")})})},hideLabel:function(e){this.$data[e]=!1},showLabel:function(e,t){t.length<1&&(this.$data[e]=!0)},submitForm:function(){var e=this;this.$validator.validateAll().then(function(){e.errors.any()||e.$store.dispatch("auth/signIn",e.user)})}}},Xe=Ye,et=(s("954b"),Object(g["a"])(Xe,Je,Ke,!1,null,"dfebef9e",null)),tt=et.exports,st=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrap-form-sign-up"},[s("transition",{attrs:{name:"fade",mode:"out-in"}},[e.verify?s("form",{key:"verifyForm",staticClass:"form-verify"},[s("auth-verify")],1):s("form",{key:"singUpForm"},[s("div",{staticClass:"row"},[s("div",{staticClass:"row-item"},[s("label",{staticClass:"label",class:[!e.labelName&&"hide-label"],attrs:{for:"firstName"}},[e._v("Имя"),s("span",{staticClass:"label-star"},[e._v("*")])]),e.errors.has("name")?s("span",{staticClass:"error"},[e._v(e._s(e.errors.first("name")))]):e._e(),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|alpha",expression:"'required|alpha'"},{name:"model",rawName:"v-model",value:e.user.name,expression:"user.name"}],attrs:{name:"name",type:"text",id:"firstName"},domProps:{value:e.user.name},on:{focus:function(t){return e.hideLabel("labelName")},blur:function(t){return e.showLabel("labelName",e.user.name)},input:function(t){t.target.composing||e.$set(e.user,"name",t.target.value)}}})]),s("div",{staticClass:"row-item"},[s("label",{staticClass:"label",class:[!e.labelLastName&&"hide-label"],attrs:{for:"lastName"}},[e._v("Фамилия"),s("span",{staticClass:"label-star"},[e._v("*")])]),e.errors.has("lastName")?s("span",{staticClass:"error"},[e._v(e._s(e.errors.first("lastName")))]):e._e(),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|alpha",expression:"'required|alpha'"},{name:"model",rawName:"v-model",value:e.user.lastName,expression:"user.lastName"}],attrs:{name:"lastName",type:"text",id:"lastName"},domProps:{value:e.user.lastName},on:{focus:function(t){return e.hideLabel("labelLastName")},blur:function(t){return e.showLabel("labelLastName",e.user.lastName)},input:function(t){t.target.composing||e.$set(e.user,"lastName",t.target.value)}}})])]),s("div",{staticClass:"row"},[s("div",{staticClass:"row-item"},[s("label",{staticClass:"label",class:[!e.labelEmail&&"hide-label"],attrs:{for:"email"}},[e._v("E-mail"),s("span",{staticClass:"label-star"},[e._v("*")])]),e.errors.has("email")?s("span",{staticClass:"error"},[e._v(e._s(e.errors.first("email")))]):e._e(),s("input",{directives:[{name:"validate",rawName:"v-validate.disable",value:"required|email",expression:"'required|email'",modifiers:{disable:!0}},{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],attrs:{name:"email",type:"text",id:"email"},domProps:{value:e.user.email},on:{input:[function(t){t.target.composing||e.$set(e.user,"email",t.target.value)},function(t){return e.inputEmail(t)}],focus:function(t){return e.hideLabel("labelEmail")},blur:function(t){return e.showLabel("labelEmail",e.user.email)}}})]),s("div",{staticClass:"row-item"},[s("label",{staticClass:"label",class:[!e.labelPassword&&"hide-label"],attrs:{for:"password"}},[e._v("Пароль"),s("span",{staticClass:"label-star"},[e._v("*")])]),s("div",{staticClass:"icon-eye",class:[!!e.showEye&&"show-eye",!!e.lightEye&&"active-eye"],on:{click:e.showPassword}}),e.errors.has("password")?s("span",{staticClass:"error"},[e._v(e._s(e.errors.first("password")))]):e._e(),"checkbox"===e.typeEmail?s("input",{directives:[{name:"validate",rawName:"v-validate.disable",value:"required|min:6",expression:"'required|min:6'",modifiers:{disable:!0}},{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],ref:"password",attrs:{id:"password",name:"password",type:"checkbox"},domProps:{checked:Array.isArray(e.user.password)?e._i(e.user.password,null)>-1:e.user.password},on:{focus:function(t){return e.hideLabel("labelPassword")},blur:function(t){return e.showLabel("labelPassword",e.user.password)},input:function(t){return e.inputPassword(t)},change:function(t){var s=e.user.password,a=t.target,n=!!a.checked;if(Array.isArray(s)){var i=null,r=e._i(s,i);a.checked?r<0&&e.$set(e.user,"password",s.concat([i])):r>-1&&e.$set(e.user,"password",s.slice(0,r).concat(s.slice(r+1)))}else e.$set(e.user,"password",n)}}}):"radio"===e.typeEmail?s("input",{directives:[{name:"validate",rawName:"v-validate.disable",value:"required|min:6",expression:"'required|min:6'",modifiers:{disable:!0}},{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],ref:"password",attrs:{id:"password",name:"password",type:"radio"},domProps:{checked:e._q(e.user.password,null)},on:{focus:function(t){return e.hideLabel("labelPassword")},blur:function(t){return e.showLabel("labelPassword",e.user.password)},input:function(t){return e.inputPassword(t)},change:function(t){return e.$set(e.user,"password",null)}}}):s("input",{directives:[{name:"validate",rawName:"v-validate.disable",value:"required|min:6",expression:"'required|min:6'",modifiers:{disable:!0}},{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],ref:"password",attrs:{id:"password",name:"password",type:e.typeEmail},domProps:{value:e.user.password},on:{focus:function(t){return e.hideLabel("labelPassword")},blur:function(t){return e.showLabel("labelPassword",e.user.password)},input:[function(t){t.target.composing||e.$set(e.user,"password",t.target.value)},function(t){return e.inputPassword(t)}]}})])]),s("button",{staticClass:"btn",on:{click:function(t){return t.preventDefault(),e.submitForm(t)}}},[e._v("зарегистрироваться")])])])],1)},at=[],nt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper-verify"},[e.verifyError?s("div",{staticClass:"wrapper-verify-title"},[s("p",[e._v("Проверочный ключ не совпал")]),s("p",[e._v("Скорее всего вы неправильно его скопировали")])]):s("div",{staticClass:"wrapper-verify-title"},[s("p",[e._v("На вашу почту в течение нескольких минут прийдет письмо с секретным ключом")]),s("p",[e._v("Для успешной регистрации введите ключ в поле")])]),s("div",{staticClass:"wrapper-verify-body"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.token,expression:"token"}],staticClass:"input-verify",attrs:{type:"text"},domProps:{value:e.token},on:{input:function(t){t.target.composing||(e.token=t.target.value)}}}),s("button",{staticClass:"button-verify",on:{click:function(t){return t.preventDefault(),e.checkToken(t)}}},[e._v("подтвердить")])])])},it=[],rt={data:function(){return{token:""}},computed:Object(r["a"])({},Object(d["c"])("auth",["email","verifyError"])),methods:{checkToken:function(){this.$store.dispatch("auth/verifyEmail",{token:this.token,email:this.email})}}},ot=rt,ct=(s("94eb"),Object(g["a"])(ot,nt,it,!1,null,null,null)),lt=ct.exports,ut={components:{AuthVerify:lt},data:function(){return{lightEye:!1,showEye:!1,labelName:!0,labelLastName:!0,labelEmail:!0,labelPassword:!0,typeEmail:"password",user:{name:"",lastName:"",email:"",password:""}}},computed:Object(r["a"])({},Object(d["c"])("auth",["verify"])),methods:{showPassword:function(){"password"===this.typeEmail?this.typeEmail="text":this.typeEmail="password",this.lightEye=!this.lightEye,this.$refs.password.focus()},inputPassword:function(e){var t=this;e.target.value.length>0?this.showEye=!0:this.showEye=!1,this.$validator.validate("password").then(function(){t.errors.items.forEach(function(t){"password"===t.field&&e.target.value.length>0&&(t.msg="")})})},inputEmail:function(e){var t=this;this.$store.commit("auth/clearError"),this.$validator.validate("email").then(function(){t.errors.items.forEach(function(t){"email"===t.field&&e.target.value.length>0&&(t.msg="")})})},hideLabel:function(e){this.$data[e]=!1},showLabel:function(e,t){t.length<1&&(this.$data[e]=!0)},submitForm:function(){var e=this;this.$validator.validateAll().then(function(){e.errors.any()||e.$store.dispatch("auth/signUp",e.user)})},clearFields:function(){this.user={name:"",lastName:"",email:"",password:""},this.showEye=!1,this.labelName=!0,this.labelLastName=!0,this.labelEmail=!0,this.labelPassword=!0}}},dt=ut,mt=(s("62a3"),Object(g["a"])(dt,st,at,!1,null,"0b162385",null)),ft=mt.exports,ht={components:{SignIn:tt,SignUp:ft},computed:Object(r["a"])({},Object(d["c"])("auth",["activeTab","verify","error"])),methods:{changeTab:function(e){!this.verify&&this.$store.commit("auth/changeActiveTab",e)}}},pt=ht,gt=(s("df8c"),Object(g["a"])(pt,Qe,Ze,!1,null,"f44f67e8",null)),vt=gt.exports,_t=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-not-found"},[s("p",{staticClass:"page-not-found__title"},[e._v("страница не найдена")]),s("router-link",{staticClass:"page-not-found__to-main",attrs:{to:"/"}},[e._v("на главную")])],1)},wt=[],bt={},Ct=bt,Mt=(s("34c3"),Object(g["a"])(Ct,_t,wt,!1,null,null,null)),yt=Mt.exports,Ft={components:{Auth:vt,Error:yt},computed:{currentContent:function(){return this.$route.name}}},St=Ft,Et=Object(g["a"])(St,Ve,Ge,!1,null,null,null),kt=Et.exports,$t={computed:Object(r["a"])({},Object(d["c"])("home",["user"]),{layout:function(){return this.$route.meta.layout||"DefaultLayout"}}),components:{DefaultLayout:Be,AuthLayout:kt}},Tt=$t,xt=(s("7faf"),Object(g["a"])(Tt,n,i,!1,null,null,null)),Nt=xt.exports,At=s("8c4f"),Ot=s("bc3a"),jt=s.n(Ot),Pt={ru:{messages:{email:"введите корректный email",required:"поле обязательное для заполнения",alpha:"вводите только буквы",min:"минимальная длина 6 символов"}}};function Lt(){return{headers:{Authorization:localStorage.getItem("token")}}}var Ht="/api",Ut={namespaced:!0,state:{activeTab:"SignIn",error:"",name:"",email:"",verify:!1,verifyError:!1,styleGoToSignIn:!1},mutations:{changeActiveTab:function(e,t){e.activeTab=t,e.error=""},signUp:function(e,t){e.email=t.data.email,201===t.status&&(e.verify=!0)},signIn:function(e,t){localStorage.name=t.name.charAt(0).toUpperCase()+t.name.slice(1),localStorage.id=t.id,localStorage.token=t.token,localStorage.user=!0,Jt.push("/")},clearStorage:function(){localStorage.removeItem("name"),localStorage.removeItem("id"),localStorage.removeItem("token"),localStorage.user=!1},verifyEmail:function(e,t){200===t.status&&(e.styleGoToSignIn=!0,e.activeTab="SignIn")},setError:function(e,t){e.error=t.data.message},verifyError:function(e){e.verifyError=!0},clearError:function(e){e.error=""}},actions:{signIn:function(e,t){var s=e.commit;jt.a.post("".concat(Ht,"/auth/login"),t).then(function(e){return s("signIn",e.data)}).catch(function(e){return s("setError",e.response)})},signUp:function(e,t){var s=e.commit;jt.a.post("".concat(Ht,"/auth/register"),t).then(function(e){return s("signUp",e)}).catch(function(e){return s("setError",e.response)})},verifyEmail:function(e,t){var s=e.commit;jt.a.post("".concat(Ht,"/verifyEmail"),t).then(function(e){return s("verifyEmail",e)}).catch(function(e){return s("verifyError",e.response)})}}},It={namespaced:!0,state:{list:[{title:"Моя страница ",icon:"icon-home2",url:"/"},{title:"Друзья ",icon:"icon-user",url:"/friends"},{title:"Сообщения ",icon:"icon-bubbles2",url:"/messages"}]}};function qt(e){console.log(e)}var Dt={namespaced:!0,state:{user:{name:"",lastName:"",image:"",id:"",counterWhoAddingMe:0,counterUnreadMsgs:0}},mutations:{setUserInfo:function(e,t){var s=e.user;s.name=t.user.name,s.lastName=t.user.lastName,s.image=t.user.image,s.id=t.user._id,s.counterWhoAddingMe=t.whoAddingMeLength,s.counterUnreadMsgs=t.unreadMsgsLength},clearUser:function(e){var t=e.user;t.name="",t.lastName="",t.image="",t.id="",t.counterWhoAddingMe=0,t.counterUnreadMsgs=0},decCounter:function(e){e.user.counterWhoAddingMe>0&&e.user.counterWhoAddingMe--},changeCounterUnreadMsgs:function(e,t){e.user.counterUnreadMsgs-=t},incCounterMsg:function(e){e.user.counterUnreadMsgs+=1}},actions:{userInfo:function(e){var t=e.commit;jt.a.post("".concat(Ht,"/user/home"),{id:localStorage.id},Lt()).then(function(e){return t("setUserInfo",e.data)}).catch(function(){t("auth/clearStorage",null,{root:!0}),Jt.push("/auth")})},changeAvatar:function(e,t){e.commit;var s={headers:{"Content-Type":"multipart/form-data",Authorization:localStorage.token}};jt.a.post("".concat(Ht,"/aploadAvatar"),t,s).catch(function(e){return qt(e)})}}},Wt=(s("28a5"),s("8055")),zt=s.n(Wt),Rt=zt()();Rt.on("connect",function(){Rt.emit("setStatusOnline",localStorage.id),Rt.on("setStatusOnline",function(e){Qt.commit("friends/stateUserOnline",e)}),Rt.on("setStatusOffline",function(e){Qt.commit("friends/stateUserOffline",e)}),Rt.on("offerToFriendship",function(e){Qt.commit("friends/setFriends",{addingMe:[e]})}),Rt.on("msg",function(e){var t=e.sender,s={counterUnreadMsgs:1,image:t.image,lastName:t.lastName,name:t.name,_id:t._id,message:e.message},a=Qt.state.messages,n=a.lastMsgs.some(function(e){return e._id===t._id});if(a.lastMsgs.length?a.lastMsgs.forEach(function(i){i._id===t._id&&(i.counterUnreadMsgs?i.counterUnreadMsgs+=1:i.counterUnreadMsgs=1,i.message=e.message),n||a.lastMsgs.push(s)}):a.lastMsgs.push(s),a.stateDialogWindow&&a.friend.id===t._id){var i="января,февраля,марта,апреля,мая,июня,июля,августа,сентября,октября,ноября,декабря".split(","),r=new Date(e.created),o=r.getMinutes()>9?r.getMinutes():"0"+r.getMinutes(),c="".concat(r.getDate()," ").concat(i[r.getMonth()]);e.date=c,e.time="".concat(r.getHours(),":").concat(o),a.friend.msgs.push(e)}else Qt.commit("home/incCounterMsg")}),Rt.on("markReadMsgs",function(e){var t=Qt.state.messages;t.stateDialogWindow&&t.friend.id===e.from&&t.friend.msgs.forEach(function(e){e.stateRead=!0})})});var Bt={namespaced:!0,state:{friends:[],humans:[],whoAddingMe:[],limitHumans:50,limitFriends:50,spinnerHumans:!0,spinnerFriends:!0,stateSearchFriends:!1,stateSearchHumans:!1,activeTab:"FriendsFriends",filteredFriends:[],filteredHumans:[]},getters:{queryTitle:function(e){var t=e.whoAddingMe.length;function s(e,t){var s=[2,0,1,1,1,2];return t[e%100>4&&e%100<20?2:s[e%10<5?e%10:5]]}var a=s(t,["новая заявка","новые заявки","новых заявок"]);return"У вас ".concat(t," ").concat(a," в друзья")},friendsTitle:function(e){if(!e.spinnerFriends)return e.whoAddingMe.length?e.friends.length?"Мои друзья":"У вас пока нет друзей":e.friends.length?"":"У вас пока нет друзей"},friendsLength:function(e){return e.friends.length},showFriends:function(e){return"FriendsFriends"===e.activeTab&&!1===e.stateSearchFriends?e.friends:e.filteredFriends},showHumans:function(e){return"FriendsHumans"===e.activeTab&&!1===e.stateSearchHumans?e.humans:e.filteredHumans},noMatchesFriends:function(e){return e.stateSearchFriends&&e.filteredFriends<=0&&!e.spinnerFriends?"совпадений не найдено":null},noMatchesHumans:function(e){return e.stateSearchHumans&&e.filteredHumans<=0&&!e.spinnerHumans?"совпадений не найдено":null}},mutations:{changeActiveTab:function(e,t){e.activeTab=t},setFriends:function(e,t){t&&(t.addingMe&&(e.whoAddingMe=[],t.addingMe.forEach(function(t){e.whoAddingMe.push(t)})),t.friends&&(e.friends=[],t.friends.forEach(function(t){e.friends.push(t)}))),e.spinnerFriends=!1},getHumans:function(e,t){t.forEach(function(t){t.btnText="добавить в друзья",t.friendQuery=!1,e.humans.push(t)}),e.spinnerHumans=!1},disableBtn:function(e,t){e.stateSearchHumans?e.filteredHumans.forEach(function(e){return e._id===t?(e.btnText="запрос отправлен",e.friendQuery=!0):null}):e.humans.forEach(function(e){return e._id===t?(e.btnText="запрос отправлен",e.friendQuery=!0):null})},fromWhoAddingMeToFriends:function(e,t){var s;e.whoAddingMe.forEach(function(e,a,n){return e._id===t?s=n.splice(e,1):null}),e.friends.push(s[0])},deleteFriend:function(e,t){e.friends.splice(t,1)},rejectionFriendship:function(e,t){e.whoAddingMe.forEach(function(e,s,a){return e._id===t?a.splice(e,1):null})},setFilteredFriends:function(e,t){e.spinnerFriends=!1,e.filteredFriends=t},setFilteredHumans:function(e,t){t.forEach(function(t){t.btnText="добавить в друзья",t.friendQuery=!1,e.filteredHumans.push(t)}),e.spinnerHumans=!1},clearState:function(e){e.friends=[],e.humans=[],e.whoAddingMe=[],e.limitHumans=50,e.limitFriends=50,e.spinnerHumans=!0,e.spinnerFriends=!0,e.stateSearchFriends=!1,e.stateSearchHumans=!1,e.activeTab="FriendsFriends",e.filteredFriends=[],e.filteredHumans=[]},stateUserOnline:function(e,t){e.whoAddingMe.forEach(function(e){return e._id===t?e.online=!0:null}),e.humans.forEach(function(e){return e._id===t?e.online=!0:null}),e.friends.forEach(function(e){return e._id===t?e.online=!0:null})},stateUserOffline:function(e,t){e.whoAddingMe.forEach(function(e){return e._id===t?e.online=!1:null}),e.humans.forEach(function(e){return e._id===t?e.online=!1:null}),e.friends.forEach(function(e){return e._id===t?e.online=!1:null})}},actions:{getFriends:function(e){var t=e.commit,s=e.state;jt.a.post("".concat(Ht,"/friends/friends"),{id:localStorage.id,limit:s.limitFriends},Lt()).then(function(e){return setTimeout(function(){return t("setFriends",e.data)},700)}).catch(function(e){return qt(e)})},getHumans:function(e){var t=e.commit,s=e.state;jt.a.post("".concat(Ht,"/friends/humans"),{id:localStorage.id,limit:s.limitHumans},Lt()).then(function(e){return setTimeout(function(){return t("getHumans",e.data)},700)}).catch(function(e){return qt(e)})},offerToFriendship:function(e,t){var s=e.commit;Rt.emit("offerToFriendship",{from:localStorage.id,to:t}),s("disableBtn",t),jt.a.post("".concat(Ht,"/friends/offerToFriendship"),{id:localStorage.id,humanId:t},Lt()).catch(function(e){return qt(e)})},addFriend:function(e,t){var s=e.commit;s("fromWhoAddingMeToFriends",t),s("home/decCounter",null,{root:!0}),jt.a.post("".concat(Ht,"/friends/addFriend"),{id:localStorage.id,friendId:t},Lt()).catch(function(e){return qt(e)})},searchFriends:function(e,t){var s=e.commit,a=e.state;t.length>0?(a.filteredFriends=[],a.stateSearchFriends=!0,a.spinnerFriends=!0,jt.a.post("".concat(Ht,"/friends/filterFriends"),{id:localStorage.id,value:t},Lt()).then(function(e){return setTimeout(function(){return s("setFilteredFriends",e.data)},700)}).catch(function(e){return qt(e)})):a.stateSearchFriends=!1},searchHumans:function(e,t){var s=e.commit,a=e.state;t.length>0?(a.filteredHumans=[],a.stateSearchHumans=!0,a.spinnerHumans=!0,jt.a.post("".concat(Ht,"/friends/filterHumans"),{id:localStorage.id,value:t},Lt()).then(function(e){return setTimeout(function(){return s("setFilteredHumans",e.data)},700)}).catch(function(e){return qt(e)})):a.stateSearchHumans=!1},deleteFriend:function(e,t){var s=e.commit;s("deleteFriend",t.idx),jt.a.post("".concat(Ht,"/friends/deleteFriend"),{id:localStorage.id,friendId:t.id},Lt()).catch(function(e){return qt(e)})},rejectionFriendship:function(e,t){var s=e.commit;s("rejectionFriendship",t),s("home/decCounter",null,{root:!0}),jt.a.post("".concat(Ht,"/friends/rejectionFriendship"),{id:localStorage.id,humanId:t},Lt()).catch(function(e){return qt(e)})}}},Vt={namespaced:!0,state:{user:{name:"",lastName:"",image:"",id:"",stateAdding:!1,stateAddingMe:!1,stateFriendship:!1,btnText:"",online:!1}},mutations:{setUserInfo:function(e,t){var s=e.user;s.name=t.user.name,s.lastName=t.user.lastName,s.online=t.user.online,s.image=t.user.image,s.id=t.user._id,s.stateAdding=t.stateAdding,s.stateAddingMe=t.stateAddingMe,s.stateFriendship=t.stateFriendship,t.stateFriendship?e.user.btnText="написать сообщение":t.stateAddingMe?e.user.btnText="подтвердить":t.stateAdding?e.user.btnText="написать сообщение":t.stateAddingMe||t.stateAdding||(e.user.btnText="добавить в друзья")},changeStateAdding:function(e,t){e.user.stateAdding=t},changeStateAddingMe:function(e,t){e.user.stateAddingMe=t},changeStateFriendship:function(e,t){e.user.stateFriendship=t},clearUserInfo:function(e){e.user.name="",e.user.lastName="",e.user.image="",e.user.id="",e.stateAdding=!1,e.stateAddingMe=!1}},actions:{getUserInfo:function(e,t){var s=e.commit;s("clearUserInfo"),jt.a.post("".concat(Ht,"/user/human"),{id:localStorage.id,humanId:t},Lt()).then(function(e){s("setUserInfo",e.data),s("messages/setFriend",e.data.user,{root:!0})}).catch(function(e){return qt(e)})}}},Gt={namespaced:!0,state:{spinnerFriendMsgs:!0,spinnerLastMsgs:!1,stateDialogWindow:!1,statePrevMsgs:!1,stateFirstMsgs:!1,stateRotate:!1,lastMsgs:[],friends:[],limitFriends:50,friend:{image:"",id:"",name:"",lastName:"",msgs:[],friends:[]},msgsSettings:{limit:30,skip:0},months:"января,февраля,марта,апреля,мая,июня,июля,августа,сентября,октября,ноября,декабря".split(",")},getters:{getStateFirstMsgs:function(e){return!!(e.stateFirstMsgs&&e.msgsSettings.skip>1)},friendMsgs:function(e){var t=e.friend.msgs.map(function(e,t,s){return s[t-1]&&s[t].date===s[t-1].date?e.showDate=!1:e.showDate=!0,s[t-1]&&s[t].sender.name===s[t-1].sender.name&&!1===e.showDate?e.showName=!1:e.showName=!0,e});return t}},mutations:{setLastMsgs:function(e,t){e.spinnerLastMsgs=!1,t.msgs.forEach(function(s){var a,n;a=s.user1._id!==localStorage.id?s.user1:s.user2,t.unreadMsgs.some(function(e){return e._id===a._id?n=e.countUnreadMsgs:null}),e.lastMsgs.push({_id:a._id,message:s.message.message,name:a.name,lastName:a.lastName,image:a.image,counterUnreadMsgs:n})})},changeStateDialogWindow:function(e,t){e.stateDialogWindow=t},changeStateRotate:function(e,t){e.stateRotate=t},changeStatePrevMsgs:function(e,t){e.statePrevMsgs=t},clearDialogWindow:function(e){e.friend={id:"",name:"",lastName:"",msgs:[],friends:[]},e.msgsSettings.skip=0,e.statePrevMsgs=!1,e.stateFirstMsgs=!1},setFriend:function(e,t){var s=e.friend;s.id=t._id,s.name=t.name,s.image=t.image,s.lastName=t.lastName,e.lastMsgs.some(function(e){e._id===t._id&&(e.counterUnreadMsgs=0)})},setFriendMsgs:function(e,t){e.spinnerFriendMsgs=!1,t.length?t.forEach(function(t){var s=new Date(t.created),a=s.getMinutes()>9?s.getMinutes():"0"+s.getMinutes(),n="".concat(s.getDate()," ").concat(e.months[s.getMonth()]);t.date=n,t.time="".concat(s.getHours(),":").concat(a),e.friend.msgs.unshift(t)}):e.stateFirstMsgs=!0},setFriends:function(e,t){e.spinnerLastMsgs=!1,e.friend.friends=t},addToFriendMsgs:function(e,t){var s=new Date,a=t.hasOwnProperty("sender")?t.sender.name:localStorage.name,n=s.getMinutes()>9?s.getMinutes():"0"+s.getMinutes();e.friend.msgs.push({stateRead:!1,message:t.message,sender:{_id:localStorage.id,name:a},created:s,date:"".concat(s.getDate()," ").concat(e.months[s.getMonth()]),time:"".concat(s.getHours(),":").concat(n)})},addToLastMsgs:function(e,t){e.lastMsgs.forEach(function(s){return s._id===e.friend.id?s.message=t.message:null});var s=e.lastMsgs.some(function(t){return t._id===e.friend.id});s||e.lastMsgs.push({_id:e.friend.id,message:t.message,name:e.friend.name,lastName:e.friend.lastName,image:e.friend.image})},clearFriend:function(e){e.stateDialogWindow=!1,e.lastMsgs=[],e.friends=[],e.limitFriends=50,e.friend.id="",e.friend.name="",e.friend.lastName="",e.friend.msgs=[],e.friend.friends=[]}},actions:{lastMsgs:function(e){var t=e.commit,s=e.state;s.spinnerLastMsgs=!0,jt.a.post("".concat(Ht,"/ms/lastMsgs"),{sender:localStorage.id},Lt()).then(function(e){return setTimeout(function(){return t("setLastMsgs",e.data)},500)}).catch(function(e){return qt(e)})},friendMsgs:function(e){var t=e.commit,s=e.state;s.spinnerFriendMsgs=!0,jt.a.post("".concat(Ht,"/ms/friendMsgs"),{sender:localStorage.id,recipient:s.friend.id,skip:s.msgsSettings.skip,limit:s.msgsSettings.limit},Lt()).then(function(e){s.msgsSettings.skip+=1,setTimeout(function(){t("setFriendMsgs",e.data)},500)}).catch(function(e){return qt(e)})},sendMsg:function(e,t){var s=e.commit,a=e.state;s("addToLastMsgs",t);var n={from:localStorage.id,to:a.friend.id,message:t.message};jt.a.post("".concat(Ht,"/ms"),n,Lt()).then(function(e){return Rt.emit("msg",e.data)}).catch(function(e){return qt(e)})},setFriends:function(e){var t=e.commit,s=e.state;s.spinnerLastMsgs=!0,jt.a.post("".concat(Ht,"/friends/friends"),{id:localStorage.id,limit:s.limitFriends},Lt()).then(function(e){return setTimeout(function(){return t("setFriends",e.data)},700)}).catch(function(e){return qt(e)})},updateStateReadMsgs:function(e,t){var s=e.state;Rt.emit("markReadMsgs",{from:localStorage.id,to:s.friend.id,arrMsgs:t}),jt.a.post("".concat(Ht,"/ms/changeStateReadMsgs"),{arrMsgsId:t},Lt()).catch(function(e){return qt(e)})}}};a["default"].use(d["a"]);var Qt=new d["a"].Store({modules:{auth:Ut,menu:It,home:Dt,friends:Bt,user:Vt,messages:Gt},actions:{clearStore:function(e){var t=e.commit;t("friends/clearState"),t("home/clearUser"),t("messages/clearFriend")}}});a["default"].use(At["a"]);var Zt=new At["a"]({mode:"history",routes:[{path:"/",name:"home",component:j},{path:"/auth",name:"auth",meta:{layout:"AuthLayout"},component:vt},{path:"/friends",name:"friends",component:de},{path:"/user/:id",name:"user",component:De},{path:"/messages",name:"messages",component:M},{path:"/*",name:"error",meta:{layout:"AuthLayout"},component:yt}]});Zt.beforeEach(function(e,t,s){var a=localStorage.user;"true"==a?(!Qt.state.home.user.id.length&&Qt.dispatch("home/userInfo"),s()):"/auth"!==e.path?s("/auth"):s()});var Jt=Zt,Kt=s("1881"),Yt=s.n(Kt),Xt=s("d1d6"),es=s.n(Xt),ts=s("2896"),ss=s.n(ts),as=s("7bb1");a["default"].use(Yt.a),a["default"].use(es.a),a["default"].use(ss.a),as["a"].localize(Pt),a["default"].use(as["b"]);var ns=new as["a"];ns.localize("ru"),a["default"].config.productionTip=!1,a["default"].filter("capitalize",function(e){return e?(e=e.toString(),e.charAt(0).toUpperCase()+e.slice(1)):""}),new a["default"]({router:Jt,store:Qt,socket:Rt,render:function(e){return e(Nt)}}).$mount("#app")},6198:function(e,t,s){},"62a3":function(e,t,s){"use strict";var a=s("f011"),n=s.n(a);n.a},"67f4":function(e,t,s){},"6acf":function(e,t,s){"use strict";var a=s("bb5c"),n=s.n(a);n.a},"6de0":function(e,t,s){},"7aab":function(e,t,s){},"7faf":function(e,t,s){"use strict";var a=s("dc71"),n=s.n(a);n.a},"896d":function(e,t,s){"use strict";var a=s("6198"),n=s.n(a);n.a},"8b27":function(e,t,s){},"94eb":function(e,t,s){"use strict";var a=s("0418"),n=s.n(a);n.a},"954b":function(e,t,s){"use strict";var a=s("7aab"),n=s.n(a);n.a},"991d":function(e,t,s){"use strict";var a=s("8b27"),n=s.n(a);n.a},"9aa6":function(e,t,s){"use strict";var a=s("d905"),n=s.n(a);n.a},"9c11":function(e,t,s){},"9f28":function(e,t,s){},b34a:function(e,t,s){},b747:function(e,t,s){},b7c6:function(e,t,s){"use strict";var a=s("f09a"),n=s.n(a);n.a},bb5c:function(e,t,s){},bf3e:function(e,t,s){},bf65:function(e,t,s){"use strict";var a=s("67f4"),n=s.n(a);n.a},cf38:function(e,t,s){"use strict";var a=s("b747"),n=s.n(a);n.a},d15a:function(e,t,s){},d40b:function(e,t,s){},d800:function(e,t,s){"use strict";var a=s("b34a"),n=s.n(a);n.a},d905:function(e,t,s){},d9e1:function(e,t,s){},dc71:function(e,t,s){},df8c:function(e,t,s){"use strict";var a=s("d15a"),n=s.n(a);n.a},dfc5:function(e,t,s){},e37f:function(e,t,s){"use strict";var a=s("9f28"),n=s.n(a);n.a},f011:function(e,t,s){},f09a:function(e,t,s){}});
//# sourceMappingURL=app.bf83164f.js.map